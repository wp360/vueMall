<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>ES6</title>
</head>
<body>
  <h1>ES6 演示</h1>
  <script>
    let sum = (...m) => {
        let total = 0;
        for(var i of m){
            total += i;
        }
        console.log(`total: ${total}`)
    };
    sum(8,9,6);

    // Promise
    let checkLogin = () => {
        return new Promise((resolve,reject) =>{
            let flag = document.cookie.indexOf("userId") > -1 ? true : false;
            if(flag = true){
                resolve({
                    status: 0,
                    result: true
                })
            }else{
                reject("error");
            }
        })
    };
    let getUserInfo = () => {
        return new Promise((resolve,reject) => {
            let userInfo = {
                userId: "101"
            };
            resolve(userInfo);
        })
    };
    checkLogin().then((res) => {
        if(res.status === 0){
            console.log("login success");
            return getUserInfo();
        }
    }).catch((error) => {
      console.log(`error: ${error}`);
    }).then((result) => {
      console.log(`userId: ${result.userId}`);
    })
  </script>
</body>
</html>
